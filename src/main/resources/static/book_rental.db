-- member 
CREATE TABLE member (
    id VARCHAR(255) PRIMARY KEY,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    email_auth BOOLEAN NOT NULL DEFAULT FALSE,
    phone_number VARCHAR(20),
    nickname VARCHAR(50) NOT NULL UNIQUE,
    birthDate VARCHAR(255),
    accountDate DATETIME DEFAULT CURRENT_TIMESTAMP,
    role VARCHAR(50) DEFAULT 'USER'
);


-- book
CREATE TABLE book (
    book_number INT auto_increment PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    author VARCHAR(100),
    isbn VARCHAR(13) UNIQUE,
    publication_date DATE,
    publisher VARCHAR(100),
    language VARCHAR(50),
    total_pages VARCHAR(50),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) DEFAULT '대출 가능'
);

-- loan
CREATE TABLE loan (
    lno INT auto_increment PRIMARY key ,
    book_number INT,
    member_id VARCHAR(255),
    start_date DATETIME DEFAULT CURRENT_TIMESTAMP, 
    due_date DATETIME,
    return_date DATETIME,
    status VARCHAR(20) DEFAULT '대출 중', -- 반납 완료, 대출 중
    FOREIGN KEY (book_number) REFERENCES book(book_number) ON DELETE CASCADE,
    FOREIGN KEY (member_id) REFERENCES member(id)
);

-- book_img --
create table book_img (
	imgno int auto_increment primary key,
	book_number int not null,
	fname varchar(255),
	ord int default 0 not null,
	uuid varchar(255),
	foreign key(book_number) references book(book_number) ON DELETE CASCADE
);
